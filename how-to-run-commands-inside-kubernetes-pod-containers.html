<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="MoxSync"><meta property="og:type" content="article"><meta name=robots content="index,follow,noarchive"><meta property="og:image" content="//img/home-bg-jeep.jpg"><meta property="twitter:image" content="//img/home-bg-jeep.jpg"><meta name=title content="How to Run Commands Inside Kubernetes Pod Containers"><meta property="og:title" content="How to Run Commands Inside Kubernetes Pod Containers"><meta property="twitter:title" content="How to Run Commands Inside Kubernetes Pod Containers"><meta name=description content="Applications running in Kubernetes are normally long-lived services that you don't need to interact with. Sometimes you might want to manually run a command inside a container though, perhaps for a one-off maintenance operation or to assist a debugging procedure."><meta property="og:description" content="Applications running in Kubernetes are normally long-lived services that you don't need to interact with. Sometimes you might want to manually run a command inside a container though, perhaps for a one-off maintenance operation or to assist a debugging procedure."><meta property="twitter:description" content="Applications running in Kubernetes are normally long-lived services that you don't need to interact with. Sometimes you might want to manually run a command inside a container though, perhaps for a one-off maintenance operation or to assist a debugging procedure."><meta property="twitter:card" content="summary"><meta name=keyword content><link rel="shortcut icon" href=./img/favicon.ico><title>How to Run Commands Inside Kubernetes Pod Containers |</title><link rel=canonical href=./how-to-run-commands-inside-kubernetes-pod-containers.html><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cleanwhite/css/bootstrap.min.css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cleanwhite/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cleanwhite/css/zanshang.css><link href=https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css rel=stylesheet type=text/css><script src=https://assets.cdnweb.info/hugo/cleanwhite/js/jquery.min.js></script>
<script src=https://assets.cdnweb.info/hugo/cleanwhite/js/bootstrap.min.js></script>
<script src=https://assets.cdnweb.info/hugo/cleanwhite/js/hux-blog.min.js></script></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=./>MoxSync</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=./categories/blog>blog</a></li><li><a href=./sitemap.xml>Sitemap</a></li><li><a href=./index.xml>RSS</a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/img/home-bg-jeep.jpg)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags></div><h1>How to Run Commands Inside Kubernetes Pod Containers</h1><h2 class=subheading></h2><span class=meta>Posted by
Larita Shotwell
on
Monday, October 7, 2024</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><img src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/csit/2021/02/748108a6.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>Using Kubectl Exec</a></li></ul><ul class=table-content-level-1><li><a href=#>Choosing a Different Container</a></li></ul><ul class=table-content-level-1><li><a href=#>Waiting for Pods to Be Running</a></li></ul><ul class=table-content-level-1><li><a href=#>When Should I Use It?</a></li></ul><ul class=table-content-level-1><li><a href=#>Summary</a></li></ul><p>Applications running in Kubernetes are normally long-lived services that you don't need to interact with. Sometimes you might want to manually run a command inside a container though, perhaps for a one-off maintenance operation or to assist a debugging procedure.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>In this article we'll show how to run commands and get interactive shell sessions inside Kubernetes containers. This will let you start processes in the container using your local terminal. It's fully integrated with Kubernetes and its Kubectl CLI, so you don't have to pollute your container images with an SSH daemon to enables remote access.</p><h2 id=using-kubectl-exec>Using Kubectl Exec</h2><p><a href=#><code>kubectl exec</code></a> executes a command inside a running container. It has the following basic syntax:</p><pre>$ kubectl exec demo-pod -- demo-command</pre><p>This will run <code>demo-command</code> inside the first container of the <code>demo-pod</code> Pod. The command is executed with root privileges.</p><p>Additional flags are needed to set up an interactive terminal session:</p><ul><li><strong><code>--stdin</code> (<code>-i</code>)</strong> - Pass your terminal's standard input stream into the container.</li><li><strong><code>--tty</code> (<code>-t</code>)</strong> - Mark the standard input stream as a TTY, making it interactive.</li></ul><p>Here's an example of getting a shell to the first container in a Pod:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>$ kubectl exec -it demo-pod -- /bin/sh</pre><p>Everything after the <code>--</code> becomes part of the command that's executed inside the container. <code>kubectl exec</code> ignores the container's default entrypoint, instead launching a new process with the command you specify. You shouldn't wrap the command with quotation marks (<code>"/bin/sh"</code>) unless you'd use them normally when running the command locally.</p><h2 id=choosing-a-different-container>Choosing a Different Container</h2><p><code>kubectl exec</code> connects to the Pod's default container when no other arguments are given. The default container is the one with the <code>kubectl.kubernetes.io/default-container</code> annotation. This will be the first container in the Pod if you've not manually added the annotation to any other.</p><p>Here's a Pod that runs two containers:</p><pre>apiVersion: v1  <p>kind: Pod</p>  <p>metadata:</p>  <p> name: demo-pod</p>  <p>spec:</p>  <p> containers:</p>  <p> - name: app-container</p>  <p> image: nginx:latest</p>  <p> - name: sidecar-container</p>  <p> image: busybox:latest</p></pre><p>You can run a command inside the <code>sidecar-container</code> by adding the <code>-c</code> flag to <code>kubectl exec</code>:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>$ kubectl exec --it demo-pod -c sidecar-container -- /bin/sh</pre><h2 id=waiting-for-pods-to-be-running>Waiting for Pods to Be Running</h2><p>Kubectl will wait a minute for the Pod to be <code>Running</code> if its containers haven't already started when you run the <code>exec</code> command. This timeout value can be changed with the <code>--pod-running-timeout</code> flag. It's useful when you want to run a command straight after creating a new Pod, when it may not have been scheduled to a Node.</p><pre>$ kubectl exec --pod-running-timeout=5m demo-pod -- demo-command</pre><h2 id=when-should-i-use-it>When Should I Use It?</h2><p><code>kubectl exec</code> is best reserved for specialist situations where you need to directly interact with a container's filesystem. You could use it to access logs or caches after a problem or to run an infrequently used housekeeping script that's provided in a container image.</p><p>Although <code>kubectl exec</code> lets you run any command, you should avoid dramatically modifying the container's environment. This could cause the container to drift away from the expected state. Containers shouldn't normally require intervention so use of <code>kubectl exec</code> inside production environments usually signals that something's gone wrong.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Don't use this command to install packages or apply updates inside the container. This kind of operation should be handled by building a new container image that includes the changes, then replacing your Kubernetes Pods with ones that run the revised build. Following this principle ensures your changes won't be lost when the Pod restarts and reverts to its container image's filesystem. Keeping your containers immutable also guarantees they can be reliably reproduced from their images, which enhances reliability and ease of debugging.</p><h2 id=summary>Summary</h2><p>Running a one-off command inside a Kubernetes container lets you debug issues, perform maintenance tasks, and inspect the container's filesystem. In each of these situations, you can use <code>kubectl exec</code> to get a connection to a container.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Adding the <code>-it</code> flag combination will forward your terminal's standard input stream as a TTY, providing an interactive shell session. This won't always be necessary depending on the command you want to use: if it only produces output, without requiring any input, you can safely omit the flags.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGibnq6fpcBwtM6wZK2nXafCr3nCqKSmmZ6ZwG61zaygnZ1doMKjsdGnnK2do2K9sLCMnKanrJGeu6a%2B0mg%3D</p><hr><ul class=pager><li class=previous><a href=./high-street-bridesmaid-dresses-oasis.html data-toggle=tooltip data-placement=top title="Oasis drops new bridesmaid dress range - and brides on a budget will love the price tag">&larr;
Previous Post</a></li><li class=next><a href=./5cf548efca47412f418b4589-html.html data-toggle=tooltip data-placement=top title="Sevilla FC: El ltimo adis al nio de Utrera">Next
Post &rarr;</a></li></ul></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href=./tags/>FEATURED TAGS</a></h5><div class=tags></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"></ul><p class="copyright text-muted">Copyright &copy; MoxSync 2024<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(i,t){var n=document,s="script",e=n.createElement(s),o=n.getElementsByTagName(s)[0];e.src=i,t&&e.addEventListener("load",function(e){t(null,e)},!1),o.parentNode.insertBefore(e,o)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,r=$(_containerSelector),a=r.find("h1,h2,h3,h4,h5,h6");return $(e).html(''),a.each(function(){n=$(this).prop("tagName").toLowerCase(),i="#"+$(this).prop("id"),s=$(this).text(),t=$('<a href="'+i+'" rel="nofollow">'+s+"</a>"),o=$('<li class="'+n+'_nav"></li>').append(t),$(e).append(o)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("https://assets.cdnweb.info/hugo/cleanwhite/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>