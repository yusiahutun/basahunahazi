<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="MoxSync"><meta property="og:type" content="article"><meta name=robots content="index,follow,noarchive"><meta property="og:image" content="//img/home-bg-jeep.jpg"><meta property="twitter:image" content="//img/home-bg-jeep.jpg"><meta name=title content="How to Check If a File Exists in Linux Bash Scripts"><meta property="og:title" content="How to Check If a File Exists in Linux Bash Scripts"><meta property="twitter:title" content="How to Check If a File Exists in Linux Bash Scripts"><meta name=description content="If a Linux Bash script relies on certain files or directories being present, it can't just assume they do. It needs to check that they're definitely present. Here's how to do that. When you're writing a script you can't make assumptions about what is and isn't present on a computer. That's doubly true if the"><meta property="og:description" content="If a Linux Bash script relies on certain files or directories being present, it can't just assume they do. It needs to check that they're definitely present. Here's how to do that. When you're writing a script you can't make assumptions about what is and isn't present on a computer. That's doubly true if the"><meta property="twitter:description" content="If a Linux Bash script relies on certain files or directories being present, it can't just assume they do. It needs to check that they're definitely present. Here's how to do that. When you're writing a script you can't make assumptions about what is and isn't present on a computer. That's doubly true if the"><meta property="twitter:card" content="summary"><meta name=keyword content><link rel="shortcut icon" href=./img/favicon.ico><title>How to Check If a File Exists in Linux Bash Scripts |</title><link rel=canonical href=./bash-check-if-file-exists.html><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cleanwhite/css/bootstrap.min.css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cleanwhite/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cleanwhite/css/zanshang.css><link href=https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css rel=stylesheet type=text/css><script src=https://assets.cdnweb.info/hugo/cleanwhite/js/jquery.min.js></script>
<script src=https://assets.cdnweb.info/hugo/cleanwhite/js/bootstrap.min.js></script>
<script src=https://assets.cdnweb.info/hugo/cleanwhite/js/hux-blog.min.js></script></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=./>MoxSync</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=./categories/blog>blog</a></li><li><a href=./sitemap.xml>Sitemap</a></li><li><a href=./index.xml>RSS</a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/img/home-bg-jeep.jpg)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags></div><h1>How to Check If a File Exists in Linux Bash Scripts</h1><h2 class=subheading></h2><span class=meta>Posted by
Reinaldo Massengill
on
Friday, May 17, 2024</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>Don't Assume Anything</a></li></ul><ul class=table-content-level-1><li><a href=#>The Range of Tests</a></li></ul><ul class=table-content-level-1><li><a href=#>Using the Tests in Scripts</a></li></ul><ul class=table-content-level-1><li><a href=#>Test, Don't Assume</a></li></ul><p>If a Linux Bash script relies on certain files or directories being present, it can't just assume they do. It needs to check that they're definitely present. Here's how to do that.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=don-t-assume-anything>Don't Assume Anything</h2><p>When you're writing a script you can't make assumptions about what is and isn't present on a computer. That's doubly true if the script is going to be distributed and run on many different computers. Sooner or later, the script will run on a computer that doesn't meet your assumptions, and the script will fail or run unpredictably.</p><p>Everything we value or create on a computer is stored in a file of some format, and all of those <a href=#>files reside in a directory</a>. Scripts can read, write, rename, delete and move files and directories---all the things you can do on the command line.</p><p>The advantage you have as a human is that you can see the contents of a directory and you know if a file exists or not---or whether the expected directory even exists. If a script fouls up when it is manipulating files, it can have serious and damaging results.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Bash provides a comprehensive set of tests that you can use to detect files and directories, and test for many of their attributes. Incorporating these into scripts is easy, but the benefits in terms of robustness and fine control are considerable.</p><p><span class=related-single>Related: <a href=#>How to Use Double Bracket Conditional Tests in Linux</a></span></p><h2 id=the-range-of-tests>The Range of Tests</h2><p>By combining the if statement with the appropriate test from a large collection of file and directory tests, we can easily determine if a file exists, if it's executable, or writable, and much more.</p><ul><li><strong>-b</strong>: Returns true if the file is a block special file.</li><li><strong>-c</strong>: Returns true if the file is character special.</li><li><strong>-d</strong>: Returns true if the "file" is a directory.</li><li><strong>-e</strong>: Returns true if the file exists.</li><li><strong>-f</strong>: Returns true if the file exists and is a regular file.</li><li><strong>-g</strong>: Returns true if the file has the<pre><code class=hljs>setgid</code> </pre>permission set (<pre><code class=hljs>chmod g+</code> </pre>).</li><li><strong>-h</strong>: Returns true if the file is <a href=#>a symbolic link</a>.</li><li><strong>-L</strong>: Returns true if the file is a symbolic link.</li><li><strong>-k</strong>: Returns true if has its sticky bit set (<pre><code class=hljs>chmod +t</code> </pre>).</li><li><strong>-p</strong>: Returns true if the file is a named pipe.</li><li><strong>-r</strong>: Returns true if the file is readable.</li><li><strong>-s</strong>: Returns true if the files exists&nbsp;and&nbsp;isn't empty.</li><li><strong>-S</strong>: Returns true if the file is a socket.</li><li><strong>-t</strong>: Returns true if the file descriptor is opened in a terminal.</li><li><strong>-u</strong>: Returns true if the file has the<pre><code class=hljs>setuid</code> </pre>permission set (<pre><code class=hljs>chmod u+</code> </pre>).</li><li><strong>-w</strong>: Returns true if the file is writable.</li><li><strong>-x</strong>: Returns true if the file is executable.</li><li><strong>-O</strong>: Returns true if the is owned by you.</li><li><strong>-G</strong>: Returns true if the is owned by your group.</li><li><strong>-N</strong>: Returns true if the file has been modified since it was last read.</li><li><strong>!</strong>: The logical NOT operator.</li><li><strong>&&</strong>: The logical AND operator.</li><li><strong>||</strong>: The logical OR operator.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>The list starts with</p><pre><code class=hljs>-b</code> </pre><p>because the</p><pre><code class=hljs>-a</code> </pre><p>test has been deprecated and replaced by the</p><pre><code class=hljs>-e</code> </pre><p>test.</p><p><span class=related-single>Related: <a href=#>How to Use SUID, SGID, and Sticky Bits on Linux</a></span></p><h2 id=using-the-tests-in-scripts>Using the Tests in Scripts</h2><p>The generic file test <a href=#><code>if</code> statement</a> is a simple scripting construct. The comparison inside the double brackets "</p><pre><code class="hljs css"><span class=hljs-selector-attr>[[ ]</span>]</code> </pre><p>" uses the <code>-f</code> test to determine whether a regular file exists with that name.</p><p>Copy the text of this script into an editor and save it into a file called "script1.sh", and <a href=#>use</a></p><pre><code class=hljs>chmod</code> </pre><p>to make it executable.</p><pre>#!/bin/bash  <p>if [[ -f $1 ]] </p>  <p>then </p>  <p>&nbsp; echo "The file $1 exists." </p>  <p>else </p>  <p>&nbsp; echo "The file $1 cannot be found." </p>  <p>fi</p></pre><p>You have to pass the name of the file to the script on the command line.</p><pre>chmod +x script1.sh</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/1.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>You'll need to do this with each script if you want to try the other examples from the article.</p><p>Let's try the script on a straightforward text file.</p><pre>./script1.sh test-file.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/4.png><p>The file exists and the script correctly reports that fact. If we delete the file and try again, the test should fail and the script should report that to us.</p><pre>./script1.sh test-file.txt</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/5.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>In a real-life situation, your script would need to take whatever action was appropriate. Perhaps it flags the error and stops. Maybe it creates the file and carries on. It may copy something out of a backup directory to replace the missing file. It all depends on the purpose of the script. But at least now the script is able to make the decision based on knowing if the file is present or not.</p><p>The <code>-f</code> flag tests whether the file is present, and is a "regular" file. In other words, it isn't something that appears to be a file but isn't, such as a device file.</p><p>We'll use ls to verify that the "/dev/random" file exists, and then see what the script makes of it.</p><pre>ls -lh /dev/random</pre><pre>./script /dev/random</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/6.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Because our script is testing for regular files and "/dev/random" is a <a href=#>device</a> file, the test fails. Very often, to get to the bottom of whether a file exists you need to carefully choose which test you use, or you need to use several tests.</p><p>This is "script2.sh", which tests for regular files and for character device files.</p><pre>#!/bin/bash  <p>if [[ -f $1 ]]</p>  <p>then</p>  <p>&nbsp; echo "The file $1 exists."</p>  <p>else</p>  <p>&nbsp; echo "The file $1 is missing or not a regular file."</p>  <p>fi</p>  <p>if [[ -c $1 ]]</p>  <p>then</p>  <p>&nbsp; echo "The file $1 is a character device file."</p>  <p>else</p>  <p>&nbsp; echo "The file $1 is missing or not a special file." </p>  <p>fi</p></pre><p>If we run this script on the "/dev/random" device file the first test fails which we expect, and the second test succeeds. It recognizes the file as a device file.</p><pre>./script2.sh /dev/random</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/7.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Actually, it recognizes it as a&nbsp;character&nbsp;device file. Some device files are block device files. As it stands, our script won't cope with those.</p><pre>./script2.sh /dev/sda</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/8.png><p>We can make use of the logical <code>OR</code> operator and include another test in the second if statement. This time, whether the file is a character device file&nbsp;or&nbsp;a block device file, the test will return true. This is "script3.sh."</p><pre>#!/bin/bash  <p>if [[ -f $1 ]]</p>  <p>then</p>  <p>&nbsp; echo "The file $1 exists."</p>  <p>else</p>  <p>&nbsp; echo "The file $1 is missing or not a regular file."</p>  <p>fi</p>  <p>if [[ -c $1 || -b $1 ]]</p>  <p>then</p>  <p>&nbsp; echo "The file $1 is a character or block device file."</p>  <p>else</p>  <p>&nbsp; echo "The file $1 is missing or not a special file." </p>  <p>fi</p></pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>This script recognizes both character device and block device files.</p><pre>./script3.sh /dev/random</pre><pre>./script3.sh /dev/sda</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/9.png><p>If it is important to you to differentiate between the different types of device files, you can use nested <code>if</code> statements. This is "script4.sh."</p><pre>#!/bin/bash  <p>if [[ -f $1 ]]</p>  <p>then</p>  <p>&nbsp; echo "The file $1 exists."</p>  <p>else</p>  <p>&nbsp; echo "The file $1 is missing or not a regular file."</p>  <p>fi</p>  <p>if [[ -c $1 ]]</p>  <p>then</p>  <p>&nbsp; echo "The file $1 is a character device file."</p>  <p>else</p>  <p>&nbsp; if [[ -b $1 ]]</p>  <p>&nbsp; then</p>  <p>&nbsp; &nbsp; echo "The file $1 is a block device file." </p>  <p>&nbsp; else</p>  <p>&nbsp; &nbsp; echo "The file $1 is missing or not a device file."</p>  <p>&nbsp; fi</p>  <p>fi</p></pre><p>This script recognizes and categorizes both character device and block device files.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre>./script4.sh /dev/random</pre><pre>./script4.sh /dev/sda</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/1.png><p>Using the logical AND operator we can test for several characteristics at once. This is "script5.sh." It checks that a file exists&nbsp;and&nbsp;the script has read&nbsp;and&nbsp;write permissions for it.</p><pre>#!/bin/bash  <p>if [[ -f $1 &amp;&amp; -r $1 &amp;&amp; -w $1 ]]</p>  <p>then</p>  <p>&nbsp; echo "The file $1 exists and we have read/write permissions."</p>  <p>else</p>  <p>&nbsp; echo "The file $1 is missing, not a regular file, or we can't read/write to it."</p>  <p>fi</p></pre><p>We'll run the script on a file that belongs to us, and one that belongs to <code>root</code>.</p><pre>./script5.sh .bashrc</pre><pre>./script5.sh /etc/fstab</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/1.png><p>To test for the existence of a directory, use the <code>-d</code> test. This is "script6.sh." It is part of a backup script. The first thing it does is check whether the directory passed on the command line exists or not. It uses the logical <code>NOT</code> operator <code>!</code> in the <code>if</code> statement test.</p><pre>#!/bin/bash  <p>if [[ ! -d $1 ]]</p>  <p>then</p>  <p>&nbsp; echo "Creating backup directory:" $1</p>  <p>&nbsp; mkdir $1</p>  <p>&nbsp; if [[ ! $? -eq 0 ]]</p>  <p>&nbsp; then</p>  <p>&nbsp; &nbsp; echo "Couldn't create backup directory:" $1</p>  <p>&nbsp; &nbsp; exit</p>  <p>&nbsp; fi</p>  <p>else</p>  <p>&nbsp; echo "Backup directory exists."</p>  <p>fi</p>  <p># continue with file backup</p>  <p>echo "Backing up to: "$1</p></pre><p>If the directory doesn't exist it creates it. If the directory creation files, the script exits. If the creation of the directory succeeds, or the directory already exists, the script continues with its backup actions.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>We'll run the script and then check with <code>ls</code> and the <code>-d</code> (directory) option whether the backup directory exists.</p><pre>./script6.sh Documents/project-backup</pre><pre>ls -d Documents/project-backup</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/1.png><p>The backup directory was created. If we run the script again, it should report that the directory is already present.</p><pre>./script6.sh</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/07/1.png><p>The script finds the directory and moves on to perform the backup.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=test-don-t-assume>Test, Don't Assume</h2><p>Sooner or later, assumptions will lead to bad things happening. Test first, and react accordingly.</p><p>Knowledge is power. Use tests to give your scripts the knowledge they need.</p><p><span class=related-single>Related: <a href=#>How to Let Linux Scripts Detect They're Running in Virtual Machines</a></span></p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGhvam1mbYFwrsCsn2abmJqwrHnIn2SfoZyaeqbEyKyrrGc%3D</p><hr><ul class=pager><li class=previous><a href=./meaning-of-bang-bang-by-ariana-grande.html data-toggle=tooltip data-placement=top title="Meaning of Bang Bang by Ariana Grande">&larr;
Previous Post</a></li><li class=next><a href=./colin-farrell-wears-beanie-cap-newly-bald-head-hiking-female-companion-html.html data-toggle=tooltip data-placement=top title="Colin Farrell wears a beanie cap over his newly bald head while hiking with a female companion">Next
Post &rarr;</a></li></ul></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href=./tags/>FEATURED TAGS</a></h5><div class=tags></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"></ul><p class="copyright text-muted">Copyright &copy; MoxSync 2024<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(i,t){var n=document,s="script",e=n.createElement(s),o=n.getElementsByTagName(s)[0];e.src=i,t&&e.addEventListener("load",function(e){t(null,e)},!1),o.parentNode.insertBefore(e,o)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,r=$(_containerSelector),a=r.find("h1,h2,h3,h4,h5,h6");return $(e).html(''),a.each(function(){n=$(this).prop("tagName").toLowerCase(),i="#"+$(this).prop("id"),s=$(this).text(),t=$('<a href="'+i+'" rel="nofollow">'+s+"</a>"),o=$('<li class="'+n+'_nav"></li>').append(t),$(e).append(o)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("https://assets.cdnweb.info/hugo/cleanwhite/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>